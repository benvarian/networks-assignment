<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>

    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      let qtnArea = document.getElementsByClassName("Question-Area");
      let quizArea = document.getElementsByClassName("Quiz-Area");
      let submitBtn = document.getElementsByClassName("submit-button");

      let radio = document.getElementsByName("q");

      let radioAnsArea = document.getElementsByClassName("Half-Answer-Area");

      let answers = [];

      const addAnswer = (question, answer) => {
        answers.push({"qtn":question, "ans":answer});
      }

      const submit = async (answers) => {
        console.log(window.location.href);
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "http://localhost/ben/quiz", true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        await xhr.send(JSON.stringify({
            answers
        }));

      }


      //function called when the submit button is pressed
      function submitPressed() {

        let selections = ['a','b','c','d'];

          for(let k = 0; k < 4; k++) {
            if(radio[k].checked) {

              addAnswer(1,selections[k]);
              submit(answers[0]);
            }
          }
      }

    </script>

  </head>
  <body>
    <div>
      <nav class="bg-slate-100 shadow flex justify-between sticky top-0 z-50 place-items-center w-full">
        <div class="flex justify-center">
          <h1 class="mx-4">CITS3002 Project</h1>
          <button class="ml-4">logout</button>
          <a class="ml-4" href="profile.html">back</a>
        </div>
      </nav>
    </div>

    <div class="Quiz-Area" >
      <div style="display: block;"class="Quiz-Header slide">

        <div class="Question-Area" >
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area" >
          <div class="Half-Answer-Area" >
            <ul >
              <li >
                <input type="radio" name="q" id="1a" class="answer">
                <label for="1a" id="a_text">A</label>
              </li>
              <li >
                <input type="radio" name="q" id="1b" class="answer">
                <label for="1b" id="a_text">B</label>
              </li>
              <li >
                <input type="radio" name="q" id="1c" class="answer">
                <label for="1c" id="a_text">C</label>
              </li>
              <li >
                <input type="radio" name="q" id="1d" class="answer">
                <label for="1d" id="a_text">D</label>
              </li>
            </ul >
          </div>

        </div>

      </div>

      <div class="Quiz-Bottom" >

        <input class="bottom-button" onclick="submitPressed()" type="submit" name="" value="Next">
      </div>

    </div>

  </body>
</html>
