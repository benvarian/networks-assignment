<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <link rel="stylesheet" href="style.css">
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <script src="https://cdn.tailwindcss.com"></script>
    <script>

      let slides = document.getElementsByClassName("slide");
      let qtnArea = document.getElementsByClassName("Question-Area");
      let submitBtn = document.getElementsByClassName("submit-button");
      let q1 = document.getElementsByName("Q1");
      let q2 = document.getElementsByName("Q2");
      let q3 = document.getElementsByName("Q3");
      let q4 = document.getElementsByName("Q4");
      let q5 = document.getElementsByName("Q5");
      let q6 = document.getElementsByName("Q6");
      let q7 = document.getElementsByName("Q7");
      let q8 = document.getElementsByName("Q8");
      let q9 = document.getElementsByName("Q9");
      let q10 = document.getElementsByName("Q10");

      const questionsGiven = [{
        "qtn": "<p>1. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "a"
      },{
        "qtn": "<p>2. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "b"
      },{
        "qtn": "<p>3. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "c"
      },{
        "qtn": "<p>4. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "d"
      },{
        "qtn": "<p>5. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "a"
      },{
        "qtn": "<p>6. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "b"
      },{
        "qtn": "<p>7. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "c"
      },{
        "qtn": "<p>8. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "d"
      },{
        "qtn": "<p>9. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "a"
      },{
        "qtn": "<p>10. This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>",
        "ans": "b"
      }]
      let answers = [];
      const addAnswer = (question, answer) => {
        answers.push({"qtn":question, "ans":answer});
      }

      const submit = async (answers) => {
        var xhr = new XMLHttpRequest();
        xhr.open("POST", "http://localhost/ben/quiz", true);
        xhr.setRequestHeader('Content-Type', 'application/json');
        await xhr.send(JSON.stringify({
            answers
        }));

      }
      //console.log(submit(ans));

      let slideIndex = 1;
      showSlides(slideIndex);

      // Next/previous controls
      function plusSlides(n) {
        showSlides(slideIndex += n);
      }

      // Thumbnail image controls
      function currentSlide(n) {
        showSlides(slideIndex = n);
      }

      function showSlides(n) {
        let i;
        //let dots = document.getElementsByClassName("dot");
        if (n > slides.length) {
          slideIndex = 1;
        }
        if (n < 1) {
          slideIndex = slides.length;
        }
        if (n === slides.length) {
          submitBtn[0].style.display = "block";
        }
        else {
          submitBtn[0].style.display = "none";
        }
        for (i = 0; i < slides.length; i++) {
          slides[i].style.display = "none";
        }

        slides[slideIndex-1].style.display = "block";
        //dots[slideIndex-1].className += " active";
      }
      //function to populate questions from the JSON object
      function populateQuestions() {
        for(let i = 0; i < qtnArea.length; i++) {
          qtnArea[i].innerHTML = questionsGiven[i].qtn;
        }
      }
      //function called when the submit button is pressed
      function submitPressed() {

        let numChecked = 0;
        let selections = ['a','b','c','d'];

        for(let i = 0; i < slides.length; i++) {
          for(let k = 0; k < 4; k++) {
            if(eval(`q${i+1}`)[k].checked) {
              addAnswer(questionsGiven[i].qtn,selections[k]);
              numChecked++;
            }
          }
        }
        if(numChecked == 10) {
          //test: to show answers submitted
          for(let i = 0; i < 10; i++) {
            console.log(`Your Ans: ${answers[i].ans}, Correct Ans: ${questionsGiven[i].ans}`);
          }
        }
        else {
          console.log(`You only selected ${numChecked} out of 10 questions`);
        }

      }
    </script>
  </head>
  <body onload="populateQuestions()">
    <div>
      <nav class="bg-slate-100 shadow flex justify-between sticky top-0 z-50 place-items-center w-full">
        <div class="flex justify-center">
          <h1 class="mx-4">CITS3002 Project</h1>
          <button class="ml-4">logout</button>
          <a class="ml-4" href="profile.html">back</a>
        </div>
      </nav>
    </div>

    <div class="Quiz-Area">
      <div style="display: block;"class="Quiz-Header slide">
        <h1>Question 1 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q1" id="1a" class="answer">
                <label for="1a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q1" id="1b" class="answer">
                <label for="1b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q1" id="1c" class="answer">
                <label for="1c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q1" id="1d" class="answer">
                <label for="1d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Header slide">
        <h1>Question 2 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q2" id="2a" class="answer">
                <label for="2a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q2" id="2b" class="answer">
                <label for="2b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q2" id="2c" class="answer">
                <label for="2c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q2" id="2d" class="answer">
                <label for="2d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Header slide">
        <h1>Question 3 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q3" id="3a" class="answer">
                <label for="3a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q3" id="3b" class="answer">
                <label for="3b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q3" id="3c" class="answer">
                <label for="3c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q3" id="3d" class="answer">
                <label for="3d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Header slide">
        <h1>Question 4 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q4" id="4a" class="answer">
                <label for="4a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q4" id="4b" class="answer">
                <label for="4b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q4" id="4c" class="answer">
                <label for="4c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q4" id="4d" class="answer">
                <label for="4d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Header slide">
        <h1>Question 5 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q5" id="5a" class="answer">
                <label for="5a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q5" id="5b" class="answer">
                <label for="5b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q5" id="5c" class="answer">
                <label for="5c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q5" id="5d" class="answer">
                <label for="5d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Header slide">
        <h1>Question 6 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q6" id="6a" class="answer">
                <label for="6a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q6" id="6b" class="answer">
                <label for="6b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q6" id="6c" class="answer">
                <label for="6c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q6" id="6d" class="answer">
                <label for="6d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Header slide">
        <h1>Question 7 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q7" id="7a" class="answer">
                <label for="7a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q7" id="7b" class="answer">
                <label for="7b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q7" id="7c" class="answer">
                <label for="7c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q7" id="7d" class="answer">
                <label for="7d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Header slide">
        <h1>Question 8 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q8" id="8a" class="answer">
                <label for="8a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q8" id="8b" class="answer">
                <label for="8b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q8" id="8c" class="answer">
                <label for="8c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q8" id="8d" class="answer">
                <label for="8d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Header slide">
        <h1>Question 9 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q9" id="9a" class="answer">
                <label for="9a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q9" id="9b" class="answer">
                <label for="9b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q9" id="9c" class="answer">
                <label for="9c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q9" id="9d" class="answer">
                <label for="9d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Header slide">
        <h1>Question 10 / 10</h1><br>
        <div class="Question-Area">
          <p>This is a question and below are the answers? <br> A) <br> B) <br> C) <br> D) </p>
        </div>
        <div class="Answer-Area">
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q10" id="10a" class="answer">
                <label for="10a" id="a_text">A</label>
              </li>
              <li>
                <input type="radio" name="Q10" id="10b" class="answer">
                <label for="10b" id="a_text">B</label>
              </li>
            </ul>
          </div>
          <div class="Half-Answer-Area">
            <ul>
              <li>
                <input type="radio" name="Q10" id="10c" class="answer">
                <label for="10c" id="a_text">C</label>
              </li>
              <li>
                <input type="radio" name="Q10" id="10d" class="answer">
                <label for="10d" id="a_text">D</label>
              </li>
            </ul>
          </div>
        </div>

      </div>
      <div class="Quiz-Bottom">
        <button class="bottom-button" onclick="plusSlides(-1)" type="button" name="button" >Previous</button>
        <input class="bottom-button" onclick="plusSlides(1)" type="submit" name="" value="Next">
      </div>
      <input class="submit-button" type="submit" name="" onclick="submitPressed()" value="Submit">

    </div>

  </body>
</html>
